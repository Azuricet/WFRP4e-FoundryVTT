<!-- AP
Critical Hits
Modifications
Crew -->


<!-- <span 
style="font-size: 50px;
top: 380px;
right: 165px;
position: absolute;
transform: rotate(45deg);
font-family: var(--actor-label-font-family);">
Work In Progress
</span> -->
<div class="inventory-header item role-header">
  <span class="name">{{localize "VEHICLE.CrewRoles"}}</span>
  <span class="role-actor">{{localize "ENTITY.Actor"}}</span>
  <span class="role-skill">{{localize "VEHICLE.Skill"}}</span>
  {{#if owner}}
  <div class="item-controls">
    {{else}}
    <div class="item-controls" style = "visibility : hidden;">
    {{/if}}
    <a class="item-control item-create" title="{{localize 'SHEET.CreateItem'}}" data-type="vehicle-role"><i class="fas fa-plus"></i></a>
  </div>
</div>

<ol class="inventory-list sheet-list role-list save-scroll">
  {{#each actor.data.roles as |role r|}}
  <li class="item" data-index="{{r}}">
    <div class="content">
      <div class="item-name role-name">
        <div class="image" style="background-image: url({{role.img}})"></div>
        <a class="name role-title">{{role.name}}</a>
      </div>

      <div class="role-actor">
        <select class="actor-role-select">
          {{#select role.actor}}
          <option value="">-</option>
          {{#each ../actor.passengers as |item i|}}
          <option value="{{item.actor._id}}">{{item.actor.name}}</option>
          {{/each}}
          {{/select}}
        </select>
      </div>

      <div class="role-skill">
        {{#if role.testLabel}}
          <a>{{role.testLabel}}</a>
        {{else}}
          <a>{{role.test}}</a>
        {{/if}}
        
      </div>

      {{#if ../owner}}
      <div class="list-controls">
        {{else}}
        <div class="list-controls" style = "visibility : hidden;">
        {{/if}}
        <a class="item-control role-edit" title="{{localize 'SHEET.EditItem'}}"><i class="fas fa-edit"></i></a>
        <a class="item-control role-delete" title="{{localize 'SHEET.DeleteItem'}}"><i class="fas fa-trash"></i></a>
      </div>
  </li>
  {{/each}}
</ol>


<div class="inventory-header item mod-header">
  <div class="name">{{localize "VEHICLE.Modifications"}}</div>
  <div class="mod-type">{{localize "VEHICLE.ModType"}}</div>
  <div class="mod-enc">{{localize "Encumbrance"}}</div>
  {{#if owner}}
  <div class="list-controls">
    {{else}}
    <div class="list-controls" style = "visibility : hidden;">
    {{/if}}
    <a class="item-controls item-create" title="{{localize 'SHEET.CreateItem'}}" data-type="modification"><i class="fas fa-plus"></i></a>
  </div>
</div>

<ol class="inventory-list sheet-list save-scroll">
  {{#each actor.vehicleMods as |mod m|}}
  <li class="item" data-item-id="{{mod._id}}">
    <div class="content">
      <div class="item-name mod-name item-dropdown">
        <div class="image" style="background-image: url({{mod.img}})"></div>
        <a class="name mod-title">{{mod.name}}</a>
      </div>

      <div class="mod-type">
        {{mod.modType}}
      </div>

      <div class="mod-enc">
        {{mod.data.encumbrance.value}}
      </div>

      {{#if ../owner}}
      <div class="list-controls">
        {{else}}
        <div class="item-controls" style = "visibility : hidden;">
        {{/if}}
        <a class="item-post" title="{{localize 'SHEET.PostItem'}}"><i class="fas fa-comment"></i></a>
        <a class="item-control item-edit" title="{{localize 'SHEET.EditItem'}}"><i class="fas fa-edit"></i></a>
        <a class="item-dropdown" title="{{localize 'SHEET.Dropdown'}}"><i class="fas fa-chevron-down"></i></a>
        <a class="item-control item-delete" title="{{localize 'SHEET.DeleteItem'}}"><i class="fas fa-trash"></i></a>
      </div>
  </li>
  {{/each}}
</ol>


<div class="inventory-header item critical-header">
  <a class="name">{{localize "Critical"}}</a>
  <a class="location">{{localize "Location"}}</a>
  {{#if owner}}
  <div class="item-controls">
    {{else}}
    <div class="item-controls" style = "visibility : hidden;">
    {{/if}}
    <a class="item-control item-create" title="{{localize 'SHEET.CreateItem'}}" data-type="critical"><i class="fas fa-plus"></i></a>
  </div>
</div>

<ol class="inventory-list critical-list save-scroll">
  {{#each actor.criticals as |critical c|}}
  <li class="item" data-item-id="{{critical._id}}">
    <div class="content">
      <div class="item-name critical-name item-dropdown">
        <div class="image" style="background-image: url({{critical.img}})"></div>
        <a class="name critical-title">{{critical.name}}</a>
      </div>

      <div class="critical-location">
        {{critical.data.location.value}}
      </div>

      {{#if ../owner}}
      <div class="item-controls">
        {{else}}
        <div class="item-controls" style = "visibility : hidden;">
        {{/if}}
        <a class="item-post" title="{{localize 'SHEET.PostItem'}}"><i class="fas fa-comment"></i></a>
        <a class="item-control item-edit" title="{{localize 'SHEET.EditItem'}}"><i class="fas fa-edit"></i></a>
        <a class="item-dropdown" title="{{localize 'SHEET.Dropdown'}}"><i class="fas fa-chevron-down"></i></a>
        <a class="item-control item-delete" title="{{localize 'SHEET.DeleteItem'}}"><i class="fas fa-trash"></i></a>
      </div>
  </li>
  {{/each}}
</ol>

<div class="inventory-header item melee-weapon-header">
  <div id="name">{{localize "SHEET.MeleeWeaponHeader"}}</div>
  <div id="group">{{localize "Group"}}</div>
  <div id="damage">{{localize "Damage"}}</div>
  <div id="reach">{{localize "Reach"}}</div>
</div>


<ol class="inventory-list melee-weapon-list save-scroll" data-weapon-type="melee">
  {{#each actor.weapons as |item i|}}
  {{#if item.meleeWeaponType}}
  <li class="item" data-item-id="{{item.id}}">
    <div class="content">
      <div class="item-name">
        <a class="image" style="background-image: url({{item.img}})"></a>
        <a class="name vehicle-weapon-name">{{item.name}}</a>
      </div>
      <a class="group weapon-group">{{item.weaponGroup}}</a>
      <a class="damage weapon-damage" title="Damage to Weapon: {{item.data.weaponDamage}}">+{{item.damage}} {{#if item.damageDice}} + {{item.damageDice}} {{/if}}</a>
      <a class="reach weapon-reach">{{item.reach}}</a>
    </div>
    <div class="content">
      <div class="weapon-property">

        {{#if item.properties.special}}
        <a class='text melee-property-quality melee-property-flaw'>{{localize "Special"}}</a>
        {{/if}}


        {{#if item.properties.qualities}}
        <span class="label quality">Q:</span>
        {{#each item.properties.qualities as |property p|}}
        <a class='text melee-property-quality'>{{property}}</a><h1 class='text melee-property-quality comma'>,</h1>
        {{/each}}
        {{/if}}

        {{#if item.properties.flaws}}
        <span class="label flaw">F:</span>
        {{#each item.properties.flaws as |property p|}}
        <a class='text melee-property-flaw'>{{property}}</a><h2 class='text melee-property-flaw comma'>,</h2>
        {{/each}}
        {{/if}}
      </div>
    </div>
  </li>
  {{/if}}
  {{/each}}
</ol>

<div class="inventory-header item ranged-weapon-header">
  <div id="name">{{localize "SHEET.RangedWeaponHeader"}}</div>
  <div id="group">{{localize "Group"}}</div>
  <div id="ammo">{{localize "Ammunition"}}</div>
  <div id="damage">{{localize "Damage"}}</div>
  <div id="range">{{localize "Range"}}</div>
</div>

<ol class="inventory-list ranged-weapon-list save-scroll" data-weapon-type="ranged">
  {{#each actor.weapons as |item i|}}
  {{#if item.rangedWeaponType}}

  <li class="item" data-item-id="{{item.id}}">
    <div class="content">
      <div class="item-name">
        <div class="image" style="background-image: url({{item.img}})"></div>
        <a class="name vehicle-weapon-name">{{item.name}}</a>
      </div>
      <a class="group weapon-group">{{item.weaponGroup}}</a>
      {{#if item.data.ammunitionGroup.value}}
      <div class="ammo-selector selector">
        <select name="currentAmmo-{{item.id}}" data-item-id="{{item.id}}"
          data-dtype="{{item.data.currentAmmo.type}}">
          {{#select item.data.currentAmmo.value}}
          <option class="ammo-option" value="0">None</option>
          {{#each item.ammo as |ammo a|}}
          <option class="ammo-option" value="{{ammo._id}}"> ({{ammo.data.quantity.value}}) {{ammo.name}}</option>
          {{/each}}
          {{/select}}
        </select>
      </div>
      {{else}}
      <div class="no-ammo">
        {{localize "None"}}
      </div>
      {{/if}}
      <a class="damage weapon-damage" title="Damage to Weapon: {{item.data.weaponDamage}}">+{{item.damage}} {{#if item.damageDice}} + {{item.damageDice}} {{/if}}</a>
      <a class="range weapon-range">{{item.range}} {{localize "yds"}}</a>
    </div>
    <div class="content">
      <div class="weapon-property">

        {{#if item.loading}}
          {{#if item.data.loaded.value}}
            {{#if item.data.loaded.repeater}}
              <a class='label loaded-checkbox'  data-target="data.loaded.value">{{item.data.loaded.amt}}/{{item.data.loaded.max}} {{localize "Loaded"}}</a>
            {{else}}
              <a class='label loaded-checkbox' data-target="data.loaded.value"><i class="far fa-check-circle"></i> {{localize "Loaded"}}</a>
            {{/if}}
          {{else}}
            {{#if item.data.loaded.repeater}}
              <a class='label loaded-checkbox'  data-target="data.loaded.value">{{item.data.loaded.amt}}/{{item.data.loaded.max}} {{localize "Loaded"}}</a>
            {{else}}
              <a class='label loaded-checkbox' data-target="data.loaded.value"><i class="far fa-circle"></i> {{localize "Loaded"}}</a>
            {{/if}}
          {{/if}}
        {{/if}}

        {{#if item.properties.special}}
        <a class='text ranged-property-quality ranged-property-flaw'>{{localize "Special"}}</a>
        {{/if}}

        {{#if item.properties.specialammo}}
        <a class='text ranged-property-quality ranged-property-flaw'>{{localize "Special Ammo"}}</a>
        {{/if}}

        {{#if item.properties.qualities}}
        <span class="label quality">Q:</span>
        {{#each item.properties.qualities as |property p|}}
        <a class='text ranged-property-quality'>{{property}}</a><h3 class='text ranged-property-quality comma'>,</h3>
        {{/each}}
        {{/if}}

        {{#if item.properties.flaws}}
        <span class="label flaw">F:</span>
        {{#each item.properties.flaws as |property p|}}
        <a class='text ranged-property-flaw'>{{property}}</a><h4 class='text ranged-property-flaw comma'>,</h4>
        {{/each}}
        {{/if}}
      </div>
    </div>
  </li>
  {{/if}}
  {{/each}}
</ol>

<div class="armour-section">
  {{#if actor.AP.head.show}}
  <div class="head column" data-location="head">
    <div class="armour-header">
      <span class="armour-label">{{actor.AP.head.label}}</span>
      <a class="armour-total" title="{{localize 'SHEET.ArmourAP'}}">{{actor.AP.head.value}}</a>
      <span class="toughness-total" title="{{localize 'SHEET.TB'}}">{{actor.data.characteristics.t.bonus}}</span>
    </div>
  </div>
  {{/if}}

  {{#if actor.AP.body.show}}
  <div class="body column" data-location="body">
    <div class="armour-header">
      <span class="armour-label">{{actor.AP.body.label}}</span>
      <a class="armour-total" title="Armour AP">{{actor.AP.body.value}}</a>
      
      <span class="toughness-total" title="Toughness Bonus">{{actor.data.characteristics.t.bonus}}</span>
    </div>
  </div>
  {{/if}}

  {{#if actor.AP.lArm.show}}
  <div class="larm column" data-location="lArm">
    <div class="armour-header">
      <span class="armour-label">{{actor.AP.lArm.label}}</span>
        <a class="armour-total" title="Armour AP">{{actor.AP.lArm.value}}</a>
        
        <span class="toughness-total" title="Toughness Bonus">{{actor.data.characteristics.t.bonus}}</span>
    </div>
  </div>
  {{/if}}
      
  {{#if actor.AP.rArm.show}}
  <div class="rarm column" data-location="rArm">
    <div class="armour-header">
      <span class="armour-label">{{actor.AP.rArm.label}}</span>
      <a class="armour-total" title="Armour AP">{{actor.AP.rArm.value}}</a>
      
      <span class="toughness-total" title="Toughness Bonus">{{actor.data.characteristics.t.bonus}}</span>
    </div>
  </div>
  {{/if}}

  {{#if actor.AP.lLeg.show}}
  <div class="lleg column" data-location="lLeg">
      <div class="armour-header">
        <span class="armour-label">{{actor.AP.lLeg.label}}</span>
        <a class="armour-total" title="Armour AP">{{actor.AP.lLeg.value}}</a>
        
        <span class="toughness-total" title="Toughness Bonus">{{actor.data.characteristics.t.bonus}}</span>
      </div>
  </div>
  {{/if}}

  {{#if actor.AP.rLeg.show}}
  <div class="rleg column" data-location="rLeg">
    <div class="armour-header rLeg">
      <span class="armour-label">{{actor.AP.rLeg.label}}</span>
      <a class="armour-total" title="Armour AP">{{actor.AP.rLeg.value}}</a>
      
      <span class="toughness-total" title="Toughness Bonus">{{actor.data.characteristics.t.bonus}}</span>
    </div>
  </div>
  {{/if}}

</div>